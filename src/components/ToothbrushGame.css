/* Layout */
.toothbrush-game {
	position: relative;
	width: 100%;
	height: calc(100vh - 80px);
	display: flex;
	align-items: center;
	justify-content: center;
	gap: 4rem;
}

.play-container {
	position: relative;
	width: min(92vw, 1200px);
	min-height: 60vh;
	padding: 32px 48px;
	border-radius: 24px;
	background: #ffffff;
	border: 3px solid rgba(147, 191, 199, 0.35);
	box-shadow: 0 14px 40px rgba(147, 191, 199, 0.35), 0 4px 0 rgba(147,191,199,0.35) inset;
	display: flex;
	align-items: center;
	justify-content: flex-start;
	overflow: hidden;
}

.brush-dropzone {
	position: relative;
	width: clamp(880px, 42vw, 880px);
	aspect-ratio: 3 / 1;
	display: grid;
	place-items: center;
	transform: translateY(35%);
}

.brush-dropzone.dragging::after {
	content: '';
	position: absolute;
	inset: 0;
	border: 2px dashed #7aa2ff;
	border-radius: 12px;
	pointer-events: none;
}

.toothbrush-img {
	width: 100%;
	height: auto;
	user-select: none;
	pointer-events: none; /* prevent image from grabbing drag events */
}

.hint {
	position: absolute;
	bottom: -1.75rem;
	left: 50%;
	transform: translateX(-50%);
	font-size: 0.9rem;
	color: #667085;
}

.toothpaste-img {
	width: clamp(320px, 28vw, 520px);
	height: auto;
	cursor: grab;
	user-select: none;
	position: relative;
	z-index: 20;
}
.toothpaste-img:active {
	cursor: grabbing;
}

/* Floating follows pointer */
.toothpaste-img.floating {
	position: fixed;
	transform: translate(-50%, -50%) scale(1.05);
	pointer-events: none;
}

/* Initial spawn position for toothpaste */
.toothpaste-img.start {
	position: absolute;
	top: 16px;
	right: 24px;
	transform: translateX(20%);
}

.dragging-active {
	cursor: none; /* hide native cursor while dragging */
}

/* Top-left instruction under navbar */
.step-instruction {
	position: absolute;
	top: -32px;
	left: 24px;
	color: #93BFC7; /* match navbar background color */
}
.step-title {
	font-size: 3.5rem;
	font-weight: 800;
}
.step-sub {
	font-size: 1.5rem;
	font-weight: 600;
}
/* brush progress UI removed - counter handled internally */

/* Bristles region overlay (debug) */
.bristles-region {
	position: absolute;
	top: 10%;
	right: 0; /* rightmost portion now */
	width: 30%;
	height: 25%;
	pointer-events: none;
	background: linear-gradient(270deg, rgba(255,255,255,0.35), rgba(255,255,255,0));
	mix-blend-mode: overlay;
	opacity: .0; /* hide by default */
}

.brush-dropzone.bristles-hot .bristles-region {
	opacity: .5;
}

.brush-dropzone.bristles-hot::after {
	content: '';
	position: absolute;
	inset: 0;
	border: 2px solid #4caf50;
	border-radius: 12px;
	pointer-events: none;
	box-shadow: 0 0 12px rgba(76,175,80,0.5);
}

/* Success overlay with popup animation */
.success-overlay {
	position: fixed;
	inset: 0;
	display: grid;
	place-items: center;
	z-index: 1000;
}
.success-overlay .backdrop {
	position: absolute;
	inset: 0;
	background: rgba(0,0,0,0.5);
	backdrop-filter: blur(4px);
}
.success-popup {
	position: relative;
	width: min(60vw, 520px);
	height: auto;
	animation: popIn 500ms ease-out both;
}

@keyframes popIn {
	0% { opacity: 0; transform: scale(0.8); }
	60% { opacity: 1; transform: scale(1.05); }
	100% { opacity: 1; transform: scale(1); }
}

/* Cleared state placeholder */
.toothbrush-game.cleared {
	background: transparent;
}

/* Step 1: Brushing teeth styles */
.play-container.step-1 {
	justify-content: center;
	position: relative;
}

.head-container {
	position: relative;
	display: inline-block;
}

.head-img {
	width: clamp(300px, 35vw, 500px);
	height: auto;
	user-select: none;
	pointer-events: none;
	display: block;
	transition: opacity 0.3s ease;
}

.head-img.dirty-mouth {
	position: relative;
}

.head-img.clean-mouth {
	position: absolute;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
}

/* Debug overlay to visualize teeth detection area */
.teeth-detection-area {
	position: absolute;
	left: 25%;
	right: 25%;
	top: 38%;
	bottom: 32%;
	pointer-events: none;
	border: 2px dashed rgba(76, 175, 80, 0.6);
	background: rgba(76, 175, 80, 0.1);
	opacity: 0; /* Hidden - set to 0.5 to debug */
	z-index: 10;
}

.toothbrush-draggable {
	position: absolute;
	bottom: 32px;
	right: 48px;
	width: clamp(200px, 20vw, 280px);
	height: auto;
	cursor: grab;
	user-select: none;
	transition: transform 0.2s ease;
}

.toothbrush-draggable:hover {
	transform: scale(1.05);
}

.toothbrush-draggable:active {
	cursor: grabbing;
}

.toothbrush-floating {
	position: fixed;
	width: clamp(200px, 20vw, 280px);
	height: auto;
	/* Keep the toothbrush horizontal while dragging (no rotation) */
	transform: translate(-50%, -50%) rotate(0deg);
	pointer-events: none;
	user-select: none;
	z-index: 1000;
}
